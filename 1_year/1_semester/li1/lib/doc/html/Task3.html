<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Task3</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption empty">&nbsp;</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Joao Pedro Delgado Teixeira &lt;a106836@alunos.uminho.pt&gt;<br />Ricardo Miguel da Silva Morais &lt;a106935@alunos.uminho.pt&gt;</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Task3</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Module for the realisation of Task3 of LI1 in 2023/24.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:movimenta">movimenta</a> :: <a href="LI12324.html#t:Semente" title="LI12324">Semente</a> -&gt; <a href="LI12324.html#t:Tempo" title="LI12324">Tempo</a> -&gt; <a href="LI12324.html#t:Jogo" title="LI12324">Jogo</a> -&gt; <a href="LI12324.html#t:Jogo" title="LI12324">Jogo</a></li><li class="src short"><a href="#v:movJogador">movJogador</a> :: <a href="LI12324.html#t:Tempo" title="LI12324">Tempo</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></li><li class="src short"><a href="#v:movInimigo">movInimigo</a> :: <a href="LI12324.html#t:Tempo" title="LI12324">Tempo</a> -&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>] -&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</li><li class="src short"><a href="#v:randInimigos">randInimigos</a> :: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a> -&gt; <a href="LI12324.html#t:Semente" title="LI12324">Semente</a> -&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>] -&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</li><li class="src short"><a href="#v:randInimigosAux">randInimigosAux</a> :: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; Int -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></li><li class="src short"><a href="#v:perderVida">perderVida</a> :: [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>] -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</li><li class="src short"><a href="#v:hitDano">hitDano</a> :: <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; <a href="LI12324.html#t:Hitbox" title="LI12324">Hitbox</a></li><li class="src short"><a href="#v:somPar">somPar</a> :: <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a> -&gt; <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a> -&gt; <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a></li><li class="src short"><a href="#v:danAtivo">danAtivo</a> :: <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; Bool</li><li class="src short"><a href="#v:gamaIni">gamaIni</a> :: [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>] -&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</li><li class="src short"><a href="#v:fallVoid">fallVoid</a> :: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></li><li class="src short"><a href="#v:danoDuro">danoDuro</a> :: [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>] -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></li><li class="src short"><a href="#v:colisoesDano">colisoesDano</a> :: [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>] -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; [Bool]</li><li class="src short"><a href="#v:recColec">recColec</a> :: <a href="LI12324.html#t:Jogo" title="LI12324">Jogo</a> -&gt; ([(<a href="LI12324.html#t:Colecionavel" title="LI12324">Colecionavel</a>, <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>)], <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>)</li><li class="src short"><a href="#v:insColec">insColec</a> :: (<a href="LI12324.html#t:Colecionavel" title="LI12324">Colecionavel</a>, <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>) -&gt; ([(<a href="LI12324.html#t:Colecionavel" title="LI12324">Colecionavel</a>, <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>)], <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>) -&gt; ([(<a href="LI12324.html#t:Colecionavel" title="LI12324">Colecionavel</a>, <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>)], <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>)</li><li class="src short"><a href="#v:hitColec">hitColec</a> :: <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a> -&gt; <a href="LI12324.html#t:Hitbox" title="LI12324">Hitbox</a></li><li class="src short"><a href="#v:menosAl">menosAl</a> :: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; [[<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]]</li><li class="src short"><a href="#v:substituiMatriz">substituiMatriz</a> :: [[<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]] -&gt; <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a> -&gt; <a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a> -&gt; [[<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]]</li><li class="src short"><a href="#v:substitui">substitui</a> :: [<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>] -&gt; Double -&gt; <a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a> -&gt; [<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]</li><li class="src short"><a href="#v:findBlocA">findBlocA</a> :: [[<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]] -&gt; [<a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>]</li><li class="src short"><a href="#v:noPassPar">noPassPar</a> :: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a> -&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:movimenta" class="def">movimenta</a> <a href="#v:movimenta" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Semente" title="LI12324">Semente</a></td><td class="doc"><p>Game seed</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Tempo" title="LI12324">Tempo</a></td><td class="doc"><p>Game time</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Jogo" title="LI12324">Jogo</a></td><td class="doc"><p>Game</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Jogo" title="LI12324">Jogo</a></td><td class="doc"><p>Updated game</p></td></tr></table></div><div class="doc"><p>The <strong>movimetna</strong> function must animate all the characters, i.e. calculate their new positions and their consequences.
To do this, the function has to test a <strong>non-exaustive</strong> list of events and conditions. To do this, we use auxiliary functions whose purpose is to check conditions and make changes to the game, such as:</p><ul><li><code>perderVida</code>: function that receives the list of enemies on a map and returns this same list with the lives removed from the supposed enemies.</li><li><code>gamaIni</code>: function that filters out enemies with 1 life and suppresses those with 0 lives.</li><li><code>menosAl</code>: function that updates the game map matrix when a trapdoor is stepped on.</li><li><code>fallVoid</code>: function that changes the character's speed if they are not on a platform.</li><li><code>danoDuro</code>: function that removes a life from the player if they come into contact with an enemy.</li><li><code>recColec</code>: function that updates the game when a collectible is acquired, and depending on the collectible makes changes to either the player's points or the player's character properties.</li><li><code>noPassPar</code>: function that slows the player down horizontally and/or vertically, depending on their collision with the edges of the map or with platform blocks.</li></ul><h2>Properties:</h2><h3>Main function &quot;movimenta&quot;:</h3><pre>movimenta :: Semente -&gt; Tempo -&gt; Jogo -&gt; Jogo</pre><pre>movimenta s t j@(Jogo m@(Mapa i1 i2 i3) i c p) =</pre><pre>Jogo mr (movInimigo t (randInimigos m s (gamaIni (perderVida i p)))) co (movJogador t (danoDuro i (noPassPar m (fallVoid m jo))))</pre><pre>where</pre><pre>mr = (Mapa i1 i2 (menosAl m p))</pre><pre>ri = movInimigo t (randInimigos m s i)</pre><pre>(co,jo) = recColec j</pre><h3>Auxiliary function &quot;perderVida&quot;:</h3><pre>perderVida :: [Personagem] -&gt; Personagem -&gt; [Personagem]</pre><pre>perderVida [] _ = []</pre><pre>perderVida ((Personagem i1 i2 i3 i4 i5 i6 i7 v i9 (d,id2)):ls) p</pre><pre>| acH (hitPersona (Personagem i1 i2 i3 i4 i5 i6 i7 v i9 (d,id2))) == hitDano p &amp;&amp; (danAtivo p == True) = ((Personagem i1 i2 i3 i4 i5 i6 i7 (v - 1) i9 (d,id2))) : perderVida ls p</pre><pre>| otherwise = (Personagem i1 i2 i3 i4 i5 i6 i7 v i9 (d,id2)) : perderVida ls p</pre><h4>Auxiliary function &quot;hitDano&quot;:</h4><pre>hitDano :: Personagem -&gt; Hitbox</pre><pre>hitDano (Personagem i1 i2 (x, y) o (g, c) i3 i4 i5 i6 i7)</pre><pre>| o == Este   = (somPar (fst (acH (hitPersona p))) (1,0), somPar (snd (acH (hitPersona p))) (1,0))</pre><pre>| o == Oeste  = (somPar (fst (acH (hitPersona p))) (-1,0), somPar (snd (acH (hitPersona p))) (-1,0))</pre><pre>| otherwise   = acH (hitPersona (Personagem i1 i2 (x, y) o (g, c) i3 i4 i5 i6 i7))</pre><pre>where</pre><pre>p = (Personagem i1 i2 (x, y) o (g, c) i3 i4 i5 i6 i7)</pre><h4>Auxiliary function &quot;danAtivo&quot;:</h4><pre>danAtivo :: Personagem -&gt; Bool</pre><pre>danAtivo (Personagem _ _ _ _ _ _ _ _ _ (d,_))</pre><pre>= if d == True</pre><pre>then True</pre><pre>else False</pre><h3>Auxiliary function &quot;gamaIni&quot;:</h3><pre>gamaIni :: [Personagem] -&gt; [Personagem]</pre><pre>gamaIni i = filter (\(Personagem _ _ _ _ _ _ _ v _ _) -&gt; v &gt; 0) i</pre><h3>Auxiliary function &quot;menosAl&quot;:</h3><pre>menosAl :: Mapa -&gt; Personagem -&gt; [[Bloco]]</pre><pre>menosAl mp@(Mapa _ _ m) p@(Personagem _ e (x, y) _ _ _ _ _ _ _)</pre><pre>| e == Jogador &amp;&amp; elem (fst (hitPersona (acP p))) (findBlocA m) = substituiMatriz m (yf,xf) Vazio</pre><pre>| otherwise = m</pre><pre>where (xf,yf) = fst (hitPersona (acP p))</pre><h4>Auxiliary function &quot;substituiMatriz&quot;:</h4><pre>substituiMatriz :: [[Bloco]] -&gt; Posicao -&gt; Bloco -&gt; [[Bloco]]</pre><pre>substituiMatriz [] _ _ = []</pre><pre>substituiMatriz (l:t) (0,c) v = (substitui l c v) : t</pre><pre>substituiMatriz (l:t) (linha, coluna) v = l : substituiMatriz t (linha - 1, coluna) v</pre><h4>Auxiliary function &quot;substitui&quot;:</h4><pre>substitui :: [Bloco] -&gt; Double -&gt; Bloco -&gt; [Bloco]</pre><pre>substitui [] _ _ = []</pre><pre>substitui (x:t) 0 y = y:t</pre><pre>substitui (x:t) p y = x : substitui t (p-1) y</pre><h4>Auxiliary function &quot;findBlocA&quot;:</h4><pre>findBlocA :: [[Bloco]] -&gt; [Posicao]</pre><pre>findBlocA [] = []</pre><pre>findBlocA m =</pre><pre>concatMap (\(l, bs) -&gt; [(fromIntegral c, fromIntegral l) | (b, c) &lt;- zip bs [0..], b == Alcapao]) $ zip [0..] m</pre><h3>Auxiliary function &quot;fallVoid&quot;:</h3><pre>fallVoid :: Mapa -&gt; Personagem -&gt; Personagem</pre><pre>fallVoid (Mapa _ _ b) p@(Personagem (vx,vy) _ (x, y) _ _ i6 _ _ _ _)</pre><pre>| fst (hitPersona (acP p)) `elem` findBlocP b = p</pre><pre>| i6 = p</pre><pre>| otherwise = p { velocidade = (vx, vy + 10) }</pre><h3>Auxiliary function &quot;danoDuro&quot;:</h3><pre>danoDuro :: [Personagem] -&gt; Personagem -&gt; Personagem</pre><pre>danoDuro [] p = p</pre><pre>danoDuro l p@(Personagem _ _ _ _ _ _ _ x _ _) | any (==True) (colisoesDano l p) = p { vida = (x - 1) }</pre><pre>| otherwise = p</pre><h4>Auxiliary function &quot;colisoesDano&quot;:</h4><pre>colisoesDano :: [Personagem] -&gt; Personagem -&gt; [Bool]</pre><pre>colisoesDano [] p = [False]</pre><pre>colisoesDano (h:ht) p = colisoesPersonagens h p : colisoesDano ht p</pre><h3>Auxiliary function &quot;recColec&quot;:</h3><pre>recColec :: Jogo -&gt; Jogo</pre><pre>recColec jogo@(Jogo m@(Mapa m1 m2 m3) i [] p) = ([],p)</pre><pre>recColec (Jogo m i (colec@(c,pov):r) p@(Personagem _ _ pos _ _ _ _ _ moeda dano))</pre><pre>| colPersona (acH (hitColec pov)) (acH (hitPersona p)) &amp;&amp; c == Martelo = (r, p { aplicaDano = (True,10) } )</pre><pre>| colPersona (acH (hitColec pov)) (acH (hitPersona p)) &amp;&amp; c == Moeda   = (r, p { pontos = (moeda + 1)} )</pre><pre>| otherwise = insColec colec (recColec (Jogo m i r p))</pre><h4>Auxiliary function &quot;insColec&quot;:</h4><pre>insColec :: (Colecionavel, Posicao) -&gt; ([(Colecionavel, Posicao)],Personagem) -&gt; ([(Colecionavel, Posicao)],Personagem)</pre><pre>insColec c (r,p) = (c:r, p)</pre><h4>Auxiliary function &quot;hitColec&quot;:</h4><pre>hitColec :: Posicao -&gt; Hitbox</pre><pre>hitColec (x,y)</pre><pre>= ((xe1,yd1),(xe2,yd2))</pre><pre>where</pre><pre>xe1 = x - (1 / 2)</pre><pre>yd1 = y + (1 / 2)</pre><pre>xe2 = x + (1 / 2)</pre><pre>yd2 = y - (1 / 2)</pre><h3>Auxiliary function &quot;noPassPar&quot;:</h3><pre>noPassPar :: Mapa -&gt; Personagem -&gt; Personagem</pre><pre>noPassPar mp@(Mapa _ _ m) p@(Personagem (vx, vy) _ (x, y) _ (g, c) _ _ _ _ _)</pre><pre>|  t1 &amp;&amp; t2 = p {velocidade = (0,0)}</pre><pre>|  t1 = p {velocidade = (0,vy)}</pre><pre>|  t2 = p {velocidade = (vx,0)}</pre><pre>|  otherwise = p</pre><pre>where</pre><pre>t1 = colPar m p</pre><pre>t2 = any (`elem` [(x2,y2)]) (findBlocP m)</pre><pre>where</pre><pre>(x2,y2) = fst (hitPersona p)</pre><h4>Auxiliary function &quot;movJogador&quot;:</h4><pre>movJogador :: Personagem -&gt; Personagem</pre><pre>movJogador t (Personagem (vx,vy) i2 (x, y) i4 i5 i6 i7 i8 i9 i10) =</pre><pre>(Personagem (0,0) i2 (x + (vx * t), y + (vy * t)) i4 i5 i6 i7 i8 i9 i10)</pre><h4>Auxiliary function &quot;movInimigo&quot;:</h4><pre>movInimigo :: [Personagem] -&gt; [Personagem]</pre><pre>movInimigo t i = map (movJogador t) i</pre><h4>Auxiliary function &quot;randInimigos&quot;:</h4><pre>randInimigos m s [] = []</pre><pre>randInimigos m s [] = []</pre><pre>randInimigos m s (i:is) = randInimigosAux m i (last l) : randInimigos m s is</pre><pre>where</pre><pre>l = geraAleatorios s (length (i:is))</pre><h5>Auxiliary function &quot;randInimigosAux&quot;</h5><pre>randInimigosAux :: Mapa -&gt; Personagem -&gt; Int -&gt; Personagem</pre><pre>randInimigosAux m@(Mapa m1 m2 m3) i@(Personagem (v1,v2) i2 i3 i4 i5 i6 i7 i8 i9 i10) n =</pre><pre>case n `mod` 4 of</pre><pre>0 -&gt; aD m3 i</pre><pre>1 -&gt; aE m3 i</pre><pre>2 -&gt; aS m3 i</pre><pre>3 -&gt; aC m3 i</pre><pre>_ -&gt; i</pre><pre>where</pre><pre>aD :: [[Bloco]] -&gt; Personagem -&gt; Personagem</pre><pre>aD m3 i = if movDireita m3 i then (Personagem (v1-1,v2) i2 i3 Oeste i5 i6 i7 i8 i9 i10) else (Personagem (v1+1,v2) i2 i3 Este i5 i6 i7 i8 i9 i10)</pre><pre>aE :: [[Bloco]] -&gt; Personagem -&gt; Personagem</pre><pre>aE m3 i = if movEsquerda m3 i then (Personagem (v1+1,v2) i2 i3 Este i5 i6 i7 i8 i9 i10) else (Personagem (v1-1,v2) i2 i3 Oeste i5 i6 i7 i8 i9 i10)</pre><pre>aS :: [[Bloco]] -&gt; Personagem -&gt; Personagem</pre><pre>aS m3 i = if subEscada m3 i then (Personagem (v1,v2-1) i2 i3 i4 i5 i6 i7 i8 i9 i10) else i</pre><pre>aC :: [[Bloco]] -&gt; Personagem -&gt; Personagem</pre><pre>aC m3 i = if subEscada m3 i then (Personagem (v1,v2+1) i2 i3 i4 i5 i6 i7 i8 i9 i10) else i</pre><h2>Examples of use:</h2><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>movimenta (fromIntegral 1) 2 (Jogo (Mapa ((2.5, 1.5), Este) (5, 5) [[Plataforma, Plataforma, Plataforma, Plataforma, Plataforma], [Vazio, Vazio, Vazio, Vazio, Vazio], [Vazio, Alcapao, Vazio, Vazio, Vazio], [Vazio, Vazio, Vazio, Vazio, Vazio], [Plataforma, Plataforma, Plataforma, Plataforma, Plataforma]]) ([(Personagem (1, 0) Fantasma (2.5, 1.5) Oeste (1, 1) False True 1 0 (False, 0))]) ([(Moeda, (1.5,1.5)), (Martelo,(4.5,4.5))]) (Personagem (0, 0) Jogador (1.5, 1.5) Este (1, 1) False True 3 0 (True, 5)))
</code></strong>Jogo Mapa ((2.5, 1.5), Este) (5, 5) [[Plataforma, Plataforma, Plataforma, Plataforma, Plataforma], [Vazio, Vazio, Vazio, Vazio, Vazio], [Vazio, Vazio, Vazio, Vazio, Vazio], [Vazio, Vazio, Vazio, Vazio, Vazio], [Plataforma, Plataforma, Plataforma, Plataforma, Plataforma]] [] [(Martelo,(4.5,4.5))] Personagem (0, 10) Jogador (1.5, 1.5) Este (1, 1) False True 2 1 (True, 5)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>movimenta (fromIntegral 1) 2 (Jogo (Mapa ((2.5, 1.5), Este) (5, 5) [[Plataforma, Plataforma, Plataforma, Plataforma, Plataforma], [Vazio, Vazio, Vazio, Vazio, Vazio], [Vazio, Plataforma, Vazio, Vazio, Vazio], [Vazio, Vazio, Vazio, Vazio, Vazio], [Plataforma, Plataforma, Plataforma, Plataforma, Plataforma]]) ([(Personagem (1, 0) Fantasma (3.5, 3.5) Oeste (1, 1) False True 1 0 (False, 0))]) ([(Martelo,(4.5,4.5))]) (Personagem (0, 0) Jogador (1.5, 1.5) Este (1, 1) False True 3 0 (False, 0)))
</code></strong>Jogo Mapa ((2.5, 1.5), Este) (5, 5) [[Plataforma, Plataforma, Plataforma, Plataforma, Plataforma], [Vazio, Vazio, Vazio, Vazio, Vazio], [Vazio, Plataforma, Vazio, Vazio, Vazio], [Vazio, Vazio, Vazio, Vazio, Vazio], [Plataforma, Plataforma, Plataforma, Plataforma, Plataforma]] [(Personagem (1, 0) Fantasma (3.5, 3.5) Oeste (1, 1) False True 1 0 (False, 0))] [(Martelo,(4.5,4.5))] Personagem (0, 0) Jogador (1.5, 1.5) Este (1, 1) False True 3 0 (False, 0)
</pre><p>Function that must animate all the characters, i.e. calculate their new positions and their consequences.</p></div></div><div class="top"><p class="src"><a id="v:movJogador" class="def">movJogador</a> <a href="#v:movJogador" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Tempo" title="LI12324">Tempo</a></td><td class="doc"><p>Game time</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Updated player character</p></td></tr></table></div><div class="doc"><p>Function that changes the position of the player's character according to speed</p></div></div><div class="top"><p class="src"><a id="v:movInimigo" class="def">movInimigo</a> <a href="#v:movInimigo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Tempo" title="LI12324">Tempo</a></td><td class="doc"><p>Game time</p></td></tr><tr><td class="src">-&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Enemies list</p></td></tr><tr><td class="src">-&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Updated enemies list</p></td></tr></table></div><div class="doc"><p>Function that changes the position of enemies according to their speed</p></div></div><div class="top"><p class="src"><a id="v:randInimigos" class="def">randInimigos</a> <a href="#v:randInimigos" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a></td><td class="doc"><p>Game map</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Semente" title="LI12324">Semente</a></td><td class="doc"><p>Game seed</p></td></tr><tr><td class="src">-&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Enemies list</p></td></tr><tr><td class="src">-&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Updated enemies list</p></td></tr></table></div><div class="doc"><p>Function that generates random movement to a list of enemies</p></div></div><div class="top"><p class="src"><a id="v:randInimigosAux" class="def">randInimigosAux</a> <a href="#v:randInimigosAux" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a></td><td class="doc"><p>Game map</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Game character</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Randomly generated 18-digit number</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Updated character</p></td></tr></table></div><div class="doc"><p>Function that assists &quot;randEnemies&quot;</p></div></div><div class="top"><p class="src"><a id="v:perderVida" class="def">perderVida</a> <a href="#v:perderVida" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Enemies list</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character</p></td></tr><tr><td class="src">-&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Updated enemies list</p></td></tr></table></div><div class="doc"><p>Function that receives the list of enemies on a map and returns this same list with the lives taken from the supposed enemies.</p></div></div><div class="top"><p class="src"><a id="v:hitDano" class="def">hitDano</a> <a href="#v:hitDano" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Hitbox" title="LI12324">Hitbox</a></td><td class="doc"><p>Player damage hitbox</p></td></tr></table></div><div class="doc"><p>Function that calculates the damage hitbox of the Player's character.</p></div></div><div class="top"><p class="src"><a id="v:somPar" class="def">somPar</a> :: <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a> -&gt; <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a> -&gt; <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a> <a href="#v:somPar" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:danAtivo" class="def">danAtivo</a> <a href="#v:danAtivo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>Logical value of the &quot;aplicaDano&quot; property being active</p></td></tr></table></div><div class="doc"><p>function that checks if the &quot;aplicaDano&quot; property on the Player character is _False_</p></div></div><div class="top"><p class="src"><a id="v:gamaIni" class="def">gamaIni</a> <a href="#v:gamaIni" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Enemies list</p></td></tr><tr><td class="src">-&gt; [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>List of enemies with 1 (one) life</p></td></tr></table></div><div class="doc"><p>Function that filters out enemies with 1 life and suppresses those with 0 lives.</p></div></div><div class="top"><p class="src"><a id="v:fallVoid" class="def">fallVoid</a> <a href="#v:fallVoid" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a></td><td class="doc"><p>Game map </p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character </p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character with updated speed.</p></td></tr></table></div><div class="doc"><p>Function that changes the character's speed if he is not on a platform.</p></div></div><div class="top"><p class="src"><a id="v:danoDuro" class="def">danoDuro</a> <a href="#v:danoDuro" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Enemies list</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character </p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character with updated life.</p></td></tr></table></div><div class="doc"><p>Function that removes a life from the player if they come into contact with an enemy.</p></div></div><div class="top"><p class="src"><a id="v:colisoesDano" class="def">colisoesDano</a> <a href="#v:colisoesDano" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [<a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>]</td><td class="doc"><p>Enemies list</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character </p></td></tr><tr><td class="src">-&gt; [Bool]</td><td class="doc"><p>List of the truth values of enemies in contact with the player</p></td></tr></table></div><div class="doc"><p>Function that checks if any enemies are colliding with the player.</p></div></div><div class="top"><p class="src"><a id="v:recColec" class="def">recColec</a> <a href="#v:recColec" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Jogo" title="LI12324">Jogo</a></td><td class="doc"><p>Game</p></td></tr><tr><td class="src">-&gt; ([(<a href="LI12324.html#t:Colecionavel" title="LI12324">Colecionavel</a>, <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>)], <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>)</td><td class="doc"><p>Updated collectibles</p></td></tr></table></div><div class="doc"><p>Function that updates the game when a collectible is acquired, and depending on the collectible makes changes to either the player's points or the player's character properties.</p></div></div><div class="top"><p class="src"><a id="v:insColec" class="def">insColec</a> <a href="#v:insColec" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="LI12324.html#t:Colecionavel" title="LI12324">Colecionavel</a>, <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>)</td><td class="doc"><p>Collectible and its previously processed position</p></td></tr><tr><td class="src">-&gt; ([(<a href="LI12324.html#t:Colecionavel" title="LI12324">Colecionavel</a>, <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>)], <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>)</td><td class="doc"><p>Remaining collectibles and character</p></td></tr><tr><td class="src">-&gt; ([(<a href="LI12324.html#t:Colecionavel" title="LI12324">Colecionavel</a>, <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>)], <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a>)</td><td class="doc"><p>Complete (updated) list of collectibles and characters</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:hitColec" class="def">hitColec</a> <a href="#v:hitColec" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a></td><td class="doc"><p>Position on the map of a collectible</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Hitbox" title="LI12324">Hitbox</a></td><td class="doc"><p>Collectible hitbox</p></td></tr></table></div><div class="doc"><p>Function that calculates the hitbox of a collectible.</p></div></div><div class="top"><p class="src"><a id="v:menosAl" class="def">menosAl</a> <a href="#v:menosAl" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a></td><td class="doc"><p>Game map </p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character</p></td></tr><tr><td class="src">-&gt; [[<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]]</td><td class="doc"><p>Map matrix with updated trapdoors</p></td></tr></table></div><div class="doc"><p>Function that updates the game map matrix when a trapdoor is stepped on.</p></div></div><div class="top"><p class="src"><a id="v:substituiMatriz" class="def">substituiMatriz</a> <a href="#v:substituiMatriz" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [[<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]]</td><td class="doc"><p>Map Matrix</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a></td><td class="doc"><p>Position of a block on the map</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a></td><td class="doc"><p>Block</p></td></tr><tr><td class="src">-&gt; [[<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]]</td><td class="doc"><p>Matrix with updated block</p></td></tr></table></div><div class="doc"><p>Function that replaces a block in an array with another block.</p></div></div><div class="top"><p class="src"><a id="v:substitui" class="def">substitui</a> <a href="#v:substitui" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]</td><td class="doc"><p>List of blocks</p></td></tr><tr><td class="src">-&gt; Double</td><td class="doc"><p>Position on the list</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a></td><td class="doc"><p>Block</p></td></tr><tr><td class="src">-&gt; [<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]</td><td class="doc"><p>Updated list</p></td></tr></table></div><div class="doc"><p>Function that replaces a block in a list of blocks with another block.</p></div></div><div class="top"><p class="src"><a id="v:findBlocA" class="def">findBlocA</a> <a href="#v:findBlocA" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [[<a href="LI12324.html#t:Bloco" title="LI12324">Bloco</a>]]</td><td class="doc"><p>Map definition matrix</p></td></tr><tr><td class="src">-&gt; [<a href="LI12324.html#t:Posicao" title="LI12324">Posicao</a>]</td><td class="doc"><p>List of coordinates for the top left corner of the trapdoor block</p></td></tr></table></div><div class="doc"><p>Function that calculates the list of positions of all the trapdoor blocks in a map matrix.</p></div></div><div class="top"><p class="src"><a id="v:noPassPar" class="def">noPassPar</a> <a href="#v:noPassPar" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LI12324.html#t:Mapa" title="LI12324">Mapa</a></td><td class="doc"><p>Game map</p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character </p></td></tr><tr><td class="src">-&gt; <a href="LI12324.html#t:Personagem" title="LI12324">Personagem</a></td><td class="doc"><p>Player character with updated speed.</p></td></tr></table></div><div class="doc"><p>Function that slows the player down horizontally and/or vertically, depending on their collision with the edges of the map or platform blocks.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.27.0</p></div></body></html>